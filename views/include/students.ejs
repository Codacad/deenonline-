<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="../../css/main.css">
    <title>Students</title>
</head>
<body>
    
    <div class="student-management">
        <% if(typeof data != "undefined") { %>
        <div class="container table-responsive">
            <a href="/" class="my-5 btn btn-dark btn-sm">Return to Home Page</a>
            <a href="#" class="btn btn-success btn-sm">Total Admissions = <%=data.length%></a>
            <table class="table table-hover table-striped table-bordered">
                    <% if(data.length != 0) {%>
                        <thead>
                            <tr class="pl-2">
                                <th>Serial Number</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Address</th>
                                <th>Gender</th>
                                <th>DOB</th>
                                <th>City</th>
                                <th>State</th>
                                <th>Pin Code</th>
                                <th>Country</th>
                                <th>Class Time</th>
                                <th>Contact Number</th>
                                <th>Parents' Contact Number</th>
                                <th>Course</th>
                            </tr>
                        </thead>
                        <% data.forEach((admission, index) =>  { %>
                            <tbody>
                                <tr class="pl-3">
                                    <td><%=index+1%></td>
                                    <td><%=admission.name%></td>
                                    <td><%=admission.email%></td>
                                    <td><%=admission.address%></td>
                                    <td><%=admission.gender%></td>
                                    <td><%=admission.dob.toLocaleDateString()%></td>
                                    <td><%=admission.city%></td>
                                    <td><%=admission.state%></td>
                                    <td><%=admission.zipcode%></td>
                                    <td><%=admission.country%></td>
                                    <td><%=admission.classtime%></td>
                                    <td><%=admission.contactnumber%></td>
                                    <td><%=admission.parentscontactnumber%></td>                           
                                   
                                    <% if(admission.course) { %>
                                        <td><%=admission.course%></td>    
                                    <% } else { %>
                                    <td class="courses">
                                        <ul>
                                            <% for(let course in admission.courses[0]) { %> 
                                                <li><%=admission.courses[0][course]%></li>
                                            <%}%>
                                        </ul>
                                    </td>
                                    <% } %>
                                   <td><a href="/studentssssss_/delete/<%=admission._id%>">Delete</a></td>
                                </tr>
                            </tbody>
                        <% }) %>
                    <%} else { %>
                        <div class="empty-inbox">
                            No Admissions.....
                        </div>
                    <%}%>
              </table>
        </div>
        <% } %>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>